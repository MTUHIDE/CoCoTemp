<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:include="fragmentTemplate :: header" th:remove="tag"></div>
    <link th:href="@{/css/dashboard.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/css/sideNav.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css}" rel="stylesheet" type="text/css"/>
    <title>CoCoTemp Dashboard</title>
</head>
<body>
<div id="wrapper">
    <div th:include="injectTemplate :: usernavbar" th:remove="tag"></div>
    <div id="page-content-wrapper">
        <div class="container-fluid">

            <div class="row">
                <div class="col-lg-6">
                    <h2 style="margin-top: 0;">DASHBOARD</h2>
                </div>
                <div class="col-lg-6">
                    <div class="">
                        <a class="btn btn-primary standard" data-toggle="modal" data-target=".bs-example-modal-sm">Upload</a>
                        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog"
                             aria-labelledby="mySmallModalLabel">
                            <div class="modal-dialog modal-sm" role="document">
                                <div class="modal-content">
                                    <h1>Upload</h1>
                                    <p>
                                        Upload your data here! We'll run through it and put things where they belong!
                                    </p>

                                    <form id="upload-form" method="post">
                                        <label for="device-select">
                                            Station:
                                            <select id="device-select">
                                                <!--/*@thymesVar id="device" type="space.hideaway.model.Device"*/-->
                                                <option th:each="device : ${devices}"
                                                        th:value="${device.getId()}"
                                                        th:text="${device.getDeviceName()}">
                                                </option>
                                            </select>
                                        </label>
                                        <input id="file" name="file" type="file"/>
                                        <button type="submit">Upload</button>
                                        <progress id="progress"></progress>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-4">
                    <div class="well">
                        <h4>Overview</h4>
                        <div class="row">
                            <div class="col-lg-2 ">
                                <h1 class="temperature-header">~&deg;</h1>
                            </div>
                        </div>
                        <hr/>
                        <div class="row">
                            <div class="col-lg-12">
                                <span>Temperature is up ~ degrees from last week.</span><br/>
                                <span>Temperature is up ~ degrees from last month.</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="well">
                        <h4>Statistics</h4>
                        <div class="row">
                            <div class="col-lg-12">

                                <table class="table">
                                    <tr>
                                        <th>Minimum</th>
                                        <td>~&deg;</td>
                                    </tr>
                                    <tr>
                                        <th>Maximum</th>
                                        <td>~&deg;</td>
                                    </tr>
                                    <tr>
                                        <th>Average</th>
                                        <td>~&deg;</td>
                                    </tr>
                                    <tr>
                                        <th>Records</th>
                                        <td th:text="${records}"></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-lg-6">
                    <div class="well">
                        <h4>Temperature Plot</h4>
                        <div class="row">
                            <div class="col-lg-12">
                                <canvas id="temperature-chart" height="25px" width="100%"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-12">
                    <div class="well">
                        <h4>Records</h4>
                        <table id="temperature-table" class="table">
                            <thead>
                            <tr>
                                <th>Date</th>
                                <th>Station</th>
                                <th>Location</th>
                                <th>Temperature</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="d : ${data}">
                                <td th:text="*{d.getDateTime()}"></td>
                                <td th:text="*{d.getDevice().getDeviceName()}"></td>
                                <td th:text="*{d.getDevice().getDeviceLatitude() + ' ' +
                                d.getDevice().getDeviceLongitude()}"></td>
                                <td th:text="*{d.getTemperature() + '&deg; ' + temperatureUnit}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:include="fragmentTemplate :: footer"></div>
<script type="text/javascript"
        th:src="@{//cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0-rc.1/Chart.bundle.min.js}"></script>
<script type="text/javascript" th:src="@{//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js}"></script>
<script type="text/javascript" th:src="@{/js/chart.js}"></script>
<script type="text/javascript" th:src="@{/js/dashboard.js}"></script>
</body>
</html>